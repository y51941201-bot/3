<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ball Race & Physics Lab</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <canvas id="gameCanvas"></canvas>

    <!-- UI Layer -->
    <div id="uiLayer">
        <!-- Top Left: Navigation -->
        <div id="topLeftBar">
            <button id="physicsBtn">ğŸ§ª Labs</button>
            <button id="shopBtn">ğŸ›’ Skin Shop</button>
        </div>

        <!-- Top Right: Rules -->
        <button id="rulesBtn">ğŸ“œ Rules</button>

        <!-- Bottom Left: Hard Restart -->
        <button id="hardRestartBtn">ğŸ”„ Restart Race</button>

        <!-- Score & Timer (Center Top) -->
        <div id="infoPanel">
            <div id="scoreBoard">Score: 0</div>
            <div id="timerBoard">Time: 20s</div>
        </div>

        <!-- Physics Menu -->
        <div id="physicsMenu">
            <h2>Physics Labs</h2>
            <div class="menu-grid">
                <button class="menu-btn special-btn" onclick="startDemo('basketball')">
                    ğŸ€ Basketball<br><span>(Throw to Shoot)</span>
                </button>
                <button class="menu-btn" onclick="startDemo('spring')">
                    ğŸŒ€ Spring Mass<br><span>(Hooke's Law)</span>
                </button>
            </div>
            <button class="menu-btn back-btn" onclick="backToRace()">ğŸ”™ Back to Race</button>
        </div>

        <!-- Physics Controls (Bottom Center) -->
        <div id="demoControls">
            
            <!-- Basketball Controls -->
            <div id="ctrl-basketball" class="control-group" style="display:none;">
                <span id="basketScore" style="color:#fab1a0; font-weight:bold;">Hoops: 0</span>
            </div>

            <!-- Spring Controls -->
            <div id="ctrl-spring" class="control-group" style="display:none;">
                <label>Spring ($k$): <span id="springVal">0.1</span></label>
                <input type="range" id="springSlider" min="1" max="50" value="10">
                <div style="margin-top:10px;">
                    <button id="surfaceBtn" onclick="toggleSurface()">Surface: Smooth (Ice)</button>
                </div>
            </div>
            
            <div id="demoInstruction"></div>
        </div>

        <button id="backToMenuBtn" onclick="openPhysicsMenu()">â†© Menu</button>

        <!-- Shop Modal -->
        <div id="shopModal" class="modal">
            <h2>ğŸ›’ Skin Shop</h2>
            <p class="modal-subtitle">Spend score to buy skins.<br>Resets when you click "Restart Race".</p>
            <div id="shopGrid"></div>
            <button class="close-btn" onclick="closeShop()">Close</button>
        </div>

        <!-- Rules Modal -->
        <div id="rulesModal" class="modal">
            <h2>ğŸ“œ Game Rules</h2>
            <div class="rules-content">
                <p><strong>ğŸ The Race:</strong> Avoid Red Balls! <strong>Hit Red = Game Over.</strong></p>
                <p><strong>ğŸ€ Basketball:</strong> Drag the ball towards the hoop to throw it.</p>
                <p><strong>ğŸŒ€ Spring Lab:</strong> Drag the block to oscillate. Change friction and spring stiffness ($k$).</p>
                <p><strong>âš ï¸ Restart:</strong> Bottom-left button resets Score & Inventory.</p>
            </div>
            <button class="close-btn" onclick="closeRules()">Got it!</button>
        </div>

        <!-- Round Over Modal -->
        <div id="roundOverModal" class="modal">
            <h1 id="roundTitle">TIME'S UP!</h1>
            <p id="finalScore">Final Score: 0</p>
            <div class="modal-actions">
                <button onclick="openShop()">ğŸ›’ Go Shopping</button>
                <button onclick="openPhysicsMenu()">ğŸ§ª Physics Labs</button>
                <button class="close-btn" onclick="closeRoundOver()">ğŸ‘€ Stay Here</button>
            </div>
            <p class="modal-subtitle" style="margin-top:10px">Click "Restart Race" to play again.</p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>